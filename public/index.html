<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>LII Simposium Nacional de Alumbrado</title>
<link rel="icon" type="image/png" href="/assets/logo-simposium.png" />
<link rel="apple-touch-icon" href="/assets/logo-simposium.png" />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-title" content="Simposium">
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script>
      window.OneSignalDeferred = window.OneSignalDeferred || [];
      OneSignalDeferred.push(async function(OneSignal) {
        await OneSignal.init({ appId: "46e0be44-a374-472e-b2d9-402011861aaa" });
      });
    </script>

    <style>
      #muro-avisos {
        display: none; 
        background: #fdf2f2; 
        color: #9b1c1c;
        padding: 15px 40px 15px 15px; /* Espacio para la X */
        border-bottom: 2px solid #f05252;
        text-align: center;
        font-family: sans-serif;
        font-weight: bold;
        position: sticky;
        top: 0;
        z-index: 999;
      }
      #cerrar-aviso {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        cursor: pointer;
        font-size: 20px;
        opacity: 0.7;
      }
    </style>
</head>
<body class="antialiased bg-white">
    <div id="muro-avisos">
      ðŸ“¢ <span id="texto-aviso">Cargando avisos...</span>
      <span id="cerrar-aviso" onclick="document.getElementById('muro-avisos').style.display='none'">Ã—</span>
    </div>

    <div id="root"></div>

    <script>
      async function actualizarAviso() {
        try {
          // Tu URL de Google Sheets conectada
          const url = 'https://script.google.com/macros/s/AKfycbwNT97y-iS5IegV2BxBjMpKraulbPrVqOH9DsjHa2lDo8RnQ-ul6xBtPl-mBsZsaIM27Q/exec';
          const response = await fetch(url);
          const data = await response.json();
          
          const banner = document.getElementById('muro-avisos');
          const texto = document.getElementById('texto-aviso');

          if (data.mensaje && data.mensaje.toString().trim() !== "") {
            texto.innerText = data.mensaje;
            banner.style.display = 'block';
          } else {
            banner.style.display = 'none';
          }
        } catch (e) { 
          console.log("Esperando aviso del Excel..."); 
        }
      }
      
      // Ejecutar al cargar
      actualizarAviso();
      // Revisar cambios en el Excel cada 30 segundos
      setInterval(actualizarAviso, 30000);
    </script>
</body>
</html>